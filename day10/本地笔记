浪潮之巅
数学之美
失控


线程 VS 进程

进程 ：资源的集合
线程：操作cpu的最小单位

线程同时修改同一份数据时必须加锁mutex

递归锁 -- 锁中有锁

join等待一个线程结束

守护线程 服务于非守护线程

queue队列
    解耦
    提高处理效率

    FIFO
    LIFO

    消费者生产者模型

时间event
    红绿灯


---------------------------

IO 操作不占用cpu
计算占用cpu

python的多线程不适合cpu密集操作型的任务，适合io密集型的任务

python的多进程解决多核问题

linux上所有的进程都是由父进程启动的

进程间的queue共享数据实际上是克隆一份，通过pickle序列化


pipe

进程间的queue和pipe都是进程间数据的传递而不是数据的共享


进程间的数据共享 -- manage

进程锁 -- 存在的意义就是在屏幕上打印的时候不会乱，linux上会出现

进程池---同一时间在cpu上有多少进程在执行

if __name__ 作用：如果执行该脚本，就执行，如果在其他模块中import那就不会执行

回调函数的作用----只需要主进程的数据库连接，各个进程通过回调函数获取写日志

协程-微线程 yield在函数间的切换 单线程下实现的并发
    协程的好处
    1、无需线程上下文切换的开销
    2、无需原子操作锁定及同步的开销--可以理解为协程就是单线程（串行的）
    3、方便切换控制流，简化编程模型
    4、高并发+高扩展性+低成本 一个cpu支持上万个

    缺点：
    1、无法利用多核资源，协程需要和进程配合才能运行在多cpu上
    nginx是默认是单线程的，支持上万个并发
    2、进行阻塞，会阻塞整个程序
